var e,t=Object.defineProperty,s=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{r as i,_ as n,d as r,e as a,f as o,g as c,C as l,h as d,m as h,i as u,k as m,l as p,n as f,p as g,q as v,M as w,s as b,v as x,y,z as _,A as j,B as k,D as S,T,E as N,F as E,j as C,G as O,H as M,I,J as P,K as A,O as D,P as $,Q as R,U as B,V as L,W as z,X as F,Y as U,Z as W,u as V,$ as H,a0 as K}from"./index-DIx-7ASK.js";import{p as G}from"./phaser-CyRpi3Lo.js";function q(e,t){const s=e;for(const i in t)t.hasOwnProperty(i)&&(s[i]=t[i]);return s}var Y="undefined"!=typeof window&&window.document&&window.document.createElement?i.useLayoutEffect:i.useEffect;const J={closeOnMaskClick:!1,closeIcon:c.createElement(l,null),destroyOnClose:!1,disableBodyScroll:!0,forceRender:!1,getContainer:()=>document.body,mask:!0,showCloseButton:!1,stopPropagation:["click"],visible:!1},X={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Z(e,t,s){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*s):e*t*s/(t+s*e)}function Q(e,t,s,i=.15){return 0===i?function(e,t,s){return Math.max(t,Math.min(e,s))}(e,t,s):e<t?-Z(t-e,s-t,i)+t:e>s?+Z(e-s,s-t,i)+s:e}function ee(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?te(Object(s),!0).forEach((function(t){ee(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):te(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const ie={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ne(e){return e?e[0].toUpperCase()+e.slice(1):""}const re=["enter","leave"];const ae=["gotpointercapture","lostpointercapture"];function oe(e){let t=e.substring(2).toLowerCase();const s=!!~t.indexOf("passive");s&&(t=t.replace("passive",""));const i=ae.includes(t)?"capturecapture":"capture",n=!!~t.indexOf(i);return n&&(t=t.replace("capture","")),{device:t,capture:n,passive:s}}function ce(e){return"touches"in e}function le(e){return ce(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function de(e){return ce(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function he(e){const t=de(e);return ce(e)?t.identifier:t.pointerId}function ue(e){const t=de(e);return[t.clientX,t.clientY]}function me(e,...t){return"function"==typeof e?e(...t):e}function pe(){}function fe(...e){return 0===e.length?pe:1===e.length?e[0]:function(){let t;for(const s of e)t=s.apply(this,arguments)||t;return t}}function ge(e,t){return Object.assign({},t,e||{})}class ve{constructor(e,t,s){this.ctrl=e,this.args=t,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:s,args:i}=this;t[s]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,s=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=s.from?me(s.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:s,shared:i}=this;t.args=this.args;let n=0;if(e&&(t.event=e,s.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:s,altKey:i,metaKey:n,ctrlKey:r}=e;Object.assign(t,{shiftKey:s,altKey:i,metaKey:n,ctrlKey:r})}return t}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,n=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);X.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[r,a]=t._movement,[o,c]=s.threshold,{_step:l,values:d}=t;if(s.hasCustomTransform?(!1===l[0]&&(l[0]=Math.abs(r)>=o&&d[0]),!1===l[1]&&(l[1]=Math.abs(a)>=c&&d[1])):(!1===l[0]&&(l[0]=Math.abs(r)>=o&&Math.sign(r)*o),!1===l[1]&&(l[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=!1!==l[0]||!1!==l[1],!t.intentional)return;const h=[0,0];if(s.hasCustomTransform){const[e,t]=d;h[0]=!1!==l[0]?e-l[0]:0,h[1]=!1!==l[1]?t-l[1]:0}else h[0]=!1!==l[0]?r-l[0]:0,h[1]=!1!==l[1]?a-l[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const u=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in s&&(t._bounds=me(s.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[p,f]=t.offset,[[g,v],[w,b]]=t._bounds;t.overflow=[p<g?-1:p>v?1:0,f<w?-1:f>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const x=t._active&&s.rubberband||[0,0];if(t.offset=function(e,[t,s],[i,n]){const[[r,a],[o,c]]=e;return[Q(t,r,a,i),Q(s,o,c,n)]}(t._bounds,t.offset,x),t.delta=X.sub(t.offset,u),this.computeMovement(),m&&(!t.last||n>32)){t.delta=X.sub(t.offset,u);const e=t.delta.map(Math.abs);X.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&n>0&&(t.velocity=[e[0]/n,e[1]/n],t.timeDelta=n)}}emit(){const e=this.state,t=this.shared,s=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!s.triggerAllEvents)return;const i=this.handler(se(se(se({},t),e),{},{[this.aliasKey]:e.values}));void 0!==i&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class we extends ve{constructor(...e){super(...e),ee(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=X.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=X.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,s=this.config;if(!t.axis&&e){const i="object"==typeof s.axisThreshold?s.axisThreshold[le(e)]:s.axisThreshold;t.axis=function([e,t],s){const i=Math.abs(e),n=Math.abs(t);return i>n&&i>s?"x":n>i&&n>s?"y":void 0}(t._movement,i)}t._blocked=(s.lockDirection||!!s.axis)&&!t.axis||!!s.axis&&s.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const be=e=>e,xe={enabled:(e=!0)=>e,eventOptions:(e,t,s)=>se(se({},s.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return X.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?X.toVector(e):void 0,transform(e,t,s){const i=e||s.shared.transform;return this.hasCustomTransform=!!i,i||be},threshold:e=>X.toVector(e,0)},ye=se(se({},xe),{},{axis(e,t,{axis:s}){if(this.lockDirection="lock"===s,!this.lockDirection)return s},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>ye.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:s=1/0,top:i=-1/0,bottom:n=1/0}=e;return[[t,s],[i,n]]}}),_e={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]},je="undefined"!=typeof window&&window.document&&window.document.createElement;function ke(){return je&&"ontouchstart"in window}const Se={isBrowser:je,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:ke(),touchscreen:ke()||je&&window.navigator.maxTouchPoints>1,pointer:je&&"onpointerdown"in window,pointerLock:je&&"exitPointerLock"in window.document},Te={mouse:0,touch:0,pen:8},Ne=se(se({},ye),{},{device(e,t,{pointer:{touch:s=!1,lock:i=!1,mouse:n=!1}={}}){return this.pointerLock=i&&Se.pointerLock,Se.touch&&s?"touch":this.pointerLock?"mouse":Se.pointer&&!n?"pointer":Se.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:s}){if(this.preventScrollDelay="number"==typeof s?s:s||void 0===s&&e?250:void 0,Se.touchscreen&&!1!==s)return e||(void 0!==s?"y":void 0)},pointerCapture(e,t,{pointer:{capture:s=!0,buttons:i=1,keys:n=!0}={}}){return this.pointerButtons=i,this.keys=n,!this.pointerLock&&"pointer"===this.device&&s},threshold(e,t,{filterTaps:s=!1,tapsThreshold:i=3,axis:n}){const r=X.toVector(e,s?i:n?1:0);return this.filterTaps=s,this.tapsThreshold=i,r},swipe({velocity:e=.5,distance:t=50,duration:s=250}={}){return{velocity:this.transform(X.toVector(e)),distance:this.transform(X.toVector(t)),duration:s}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?se(se({},Te),e):Te,keyboardDisplacement:(e=10)=>e});se(se({},xe),{},{device(e,t,{shared:s,pointer:{touch:i=!1}={}}){if(s.target&&!Se.touch&&Se.gesture)return"gesture";if(Se.touch&&i)return"touch";if(Se.touchscreen){if(Se.pointer)return"pointer";if(Se.touch)return"touch"}},bounds(e,t,{scaleBounds:s={},angleBounds:i={}}){const n=e=>{const t=ge(me(s,e),{min:-1/0,max:1/0});return[t.min,t.max]},r=e=>{const t=ge(me(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof s&&"function"!=typeof i?[n(),r()]:e=>[n(e),r(e)]},threshold(e,t,s){return this.lockDirection="lock"===s.axis,X.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e}),se(se({},ye),{},{mouseOnly:(e=!0)=>e}),se(se({},ye),{},{mouseOnly:(e=!0)=>e});const Ee=new Map,Ce=new Map,Oe={key:"drag",engine:class extends we{constructor(...e){super(...e),ee(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),s=e.currentTarget.getBoundingClientRect(),i={left:t.left-s.left+e.offset[0],right:t.right-s.right+e.offset[0],top:t.top-s.top+e.offset[1],bottom:t.bottom-s.bottom+e.offset[1]};e._bounds=ye.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,s=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&s._pointerActive||(this.start(e),this.setupPointer(e),s._pointerId=he(e),s._pointerActive=!0,this.computeValues(ue(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==le(e)?(s._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,s=this.config;if(!t._pointerActive)return;const i=he(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;const n=ue(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=X.sub(n,t._values),this.computeValues(n)),X.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):s.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===s.preventScrollAxis||"xy"===s.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(a){}const t=this.state,s=this.config;if(!t._active||!t._pointerActive)return;const i=he(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[n,r]=t._distance;if(t.tap=n<=s.tapsThreshold&&r<=s.tapsThreshold,t.tap&&s.filterTaps)t._force=!0;else{const[e,i]=t._delta,[n,r]=t._movement,[a,o]=s.swipe.velocity,[c,l]=s.swipe.distance,d=s.swipe.duration;if(t.elapsedTime<d){const s=Math.abs(e/t.timeDelta),d=Math.abs(i/t.timeDelta);s>a&&Math.abs(n)>c&&(t.swipe[0]=Math.sign(e)),d>o&&Math.abs(r)>l&&(t.swipe[1]=Math.sign(i))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,s=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=_e[e.key];if(t){const s=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),s._delta=t(this.config.keyboardDisplacement,i),s._keyboardActive=!0,X.addTo(s._movement,s._delta),this.compute(e),this.emit()}}keyUp(e){e.key in _e&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:Ne};const Me={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(Se.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},Ie=["target","eventOptions","window","enabled","transform"];function Pe(e={},t){const s={};for(const[i,n]of Object.entries(t))switch(typeof n){case"function":s[i]=n.call(s,e[i],i,e);break;case"object":s[i]=Pe(e[i],n);break;case"boolean":n&&(s[i]=e[i])}return s}class Ae{constructor(e,t){ee(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,s,i,n){const r=this._listeners,a=function(e,t=""){const s=ie[e];return e+(s&&s[t]||t)}(t,s),o=se(se({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),n);e.addEventListener(a,i,o);const c=()=>{e.removeEventListener(a,i,o),r.delete(c)};return r.add(c),c}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class De{constructor(){ee(this,"_timeouts",new Map)}add(e,t,s=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,s,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class $e{constructor(e){var t,s;ee(this,"gestures",new Set),ee(this,"_targetEventStore",new Ae(this)),ee(this,"gestureEventStores",{}),ee(this,"gestureTimeoutStores",{}),ee(this,"handlers",{}),ee(this,"config",{}),ee(this,"pointerIds",new Set),ee(this,"touchIds",new Set),ee(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),t=this,(s=e).drag&&Re(t,"drag"),s.wheel&&Re(t,"wheel"),s.scroll&&Re(t,"scroll"),s.move&&Re(t,"move"),s.pinch&&Re(t,"pinch"),s.hover&&Re(t,"hover")}setEventIds(e){return ce(e)?(this.touchIds=new Set(function(e){return function(e){return Array.from(e.touches).filter((t=>{var s,i;return t.target===e.currentTarget||(null===(s=e.currentTarget)||void 0===s||null===(i=s.contains)||void 0===i?void 0:i.call(s,t.target))}))}(e).map((e=>e.identifier))}(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,s={}){const i=e,{target:n,eventOptions:r,window:a,enabled:o,transform:c}=i,l=function(e,t){if(null==e)return{};var s,i,n=function(e,t){if(null==e)return{};var s,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)s=r[i],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)s=r[i],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(i,Ie);if(s.shared=Pe({target:n,eventOptions:r,window:a,enabled:o,transform:c},Me),t){const e=Ce.get(t);s[t]=Pe(se({shared:s.shared},l),e)}else for(const d in l){const e=Ce.get(d);e&&(s[d]=Pe(se({shared:s.shared},l[d]),e))}return s}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,s={};let i;if(!t.target||(i=t.target(),i)){if(t.enabled){for(const t of this.gestures){const n=this.config[t],r=Be(s,n.eventOptions,!!i);n.enabled&&new(Ee.get(t))(this,e,t).bind(r)}const n=Be(s,t.eventOptions,!!i);for(const t in this.nativeHandlers)n(t,"",(s=>this.nativeHandlers[t](se(se({},this.state.shared),{},{event:s,args:e}))),void 0,!0)}for(const e in s)s[e]=fe(...s[e]);if(!i)return s;for(const e in s){const{device:t,capture:n,passive:r}=oe(e);this._targetEventStore.add(i,t,"",s[e],{capture:n,passive:r})}}}}function Re(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Ae(e,t),e.gestureTimeoutStores[t]=new De}const Be=(e,t,s)=>(i,n,r,a={},o=!1)=>{var c,l;const d=null!==(c=a.capture)&&void 0!==c?c:t.capture,h=null!==(l=a.passive)&&void 0!==l?l:t.passive;let u=o?i:function(e,t="",s=!1){const i=ie[e],n=i&&i[t]||t;return"on"+ne(e)+ne(n)+(function(e=!1,t){return e&&!re.includes(t)}(s,n)?"Capture":"")}(i,n,d);s&&h&&(u+="Passive"),e[u]=e[u]||[],e[u].push(r)};const Le="adm-popup",ze=Object.assign(Object.assign({},J),{closeOnSwipe:!1,position:"bottom"}),Fe=e=>{const{locale:t,popup:s={}}=d(),n=h(ze,s,e),r=u(`${Le}-body`,n.bodyClassName,`${Le}-body-position-${n.position}`),[a,o]=i.useState(n.visible),l=i.useRef(null);m(l,!(!n.disableBodyScroll||!a)&&"strict"),Y((()=>{n.visible&&o(!0)}),[n.visible]);const _=p(),{percent:j}=f({percent:n.visible?0:100,config:{precision:.1,mass:.4,tension:300,friction:30},onRest:()=>{var e,t;_.current||(o(n.visible),n.visible?null===(e=n.afterShow)||void 0===e||e.call(n):null===(t=n.afterClose)||void 0===t||t.call(n))}}),k=(N=({swipe:[,e]})=>{var t;n.closeOnSwipe&&(1===e&&"bottom"===n.position||-1===e&&"top"===n.position)&&(null===(t=n.onClose)||void 0===t||t.call(n))},E={axis:"y",enabled:["top","bottom"].includes(n.position)},C=Oe,Ee.set(C.key,C.engine),Ce.set(C.key,C.resolver),function(e,t={},s,i){const n=c.useMemo((()=>new $e(e)),[]);if(n.applyHandlers(e,i),n.applyConfig(t,s),c.useEffect(n.effect.bind(n)),c.useEffect((()=>n.clean.bind(n)),[]),void 0===t.target)return n.bind.bind(n)}({drag:N},E||{},"drag")),S=function(e){const[t,s]=i.useState(e);return Y((()=>{s(e)}),[e]),t}(a&&n.visible),T=g(n.stopPropagation,v(n,c.createElement("div",Object.assign({className:Le,onClick:n.onClick,style:{display:a?void 0:"none",touchAction:["top","bottom"].includes(n.position)?"none":"auto"}},k()),n.mask&&c.createElement(w,{visible:S,forceRender:n.forceRender,destroyOnClose:n.destroyOnClose,onMaskClick:e=>{var t,s;null===(t=n.onMaskClick)||void 0===t||t.call(n,e),n.closeOnMaskClick&&(null===(s=n.onClose)||void 0===s||s.call(n))},className:n.maskClassName,style:n.maskStyle,disableBodyScroll:!1,stopPropagation:n.stopPropagation}),c.createElement(b.div,{className:r,style:Object.assign(Object.assign({},n.bodyStyle),{pointerEvents:j.to((e=>0===e?"unset":"none")),transform:j.to((e=>"bottom"===n.position?`translate(0, ${e}%)`:"top"===n.position?`translate(0, -${e}%)`:"left"===n.position?`translate(-${e}%, 0)`:"right"===n.position?`translate(${e}%, 0)`:"none"))}),ref:l},n.showCloseButton&&c.createElement("a",{className:u(`${Le}-close-icon`,"adm-plain-anchor"),onClick:()=>{var e;null===(e=n.onClose)||void 0===e||e.call(n)},role:"button","aria-label":t.common.close},n.closeIcon),n.children))));var N,E,C;return c.createElement(x,{active:a,forceRender:n.forceRender,destroyOnClose:n.destroyOnClose},y(n.getContainer,T))},Ue={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},We={color:"default"},Ve=i.memo((e=>{var t;const s=h(We,e);return v(s,c.createElement("div",{style:{color:null!==(t=Ue[s.color])&&void 0!==t?t:s.color},className:u("adm-loading","adm-dot-loading")},c.createElement("svg",{height:"1em",viewBox:"0 0 100 40",style:{verticalAlign:"-0.125em"}},c.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c.createElement("g",{transform:"translate(-100.000000, -71.000000)"},c.createElement("g",{transform:"translate(95.000000, 71.000000)"},c.createElement("g",{transform:"translate(5.000000, 0.000000)"},[0,1,2].map((e=>c.createElement("rect",{key:e,fill:"currentColor",x:20+26*e,y:"16",width:"8",height:"8",rx:"2"},c.createElement("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:.2*e+"s",repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1"})))))))))))})),He="adm-button",Ke={color:"default",fill:"solid",block:!1,loading:!1,loadingIcon:c.createElement(Ve,{color:"currentColor"}),type:"button",shape:"default",size:"middle"},Ge=i.forwardRef(((e,t)=>{const s=h(Ke,e),[r,a]=i.useState(!1),o=i.useRef(null),l="auto"===s.loading?r:s.loading,d=s.disabled||l;return i.useImperativeHandle(t,(()=>({get nativeElement(){return o.current}}))),v(s,c.createElement("button",{ref:o,type:s.type,onClick:e=>n(void 0,void 0,void 0,(function*(){if(!s.onClick)return;const t=s.onClick(e);if((i=t)&&"object"==typeof i&&"function"==typeof i.then)try{a(!0),yield t,a(!1)}catch(n){throw a(!1),n}var i})),className:u(He,{[`${He}-${s.color}`]:s.color,[`${He}-block`]:s.block,[`${He}-disabled`]:d,[`${He}-fill-outline`]:"outline"===s.fill,[`${He}-fill-none`]:"none"===s.fill,[`${He}-mini`]:"mini"===s.size,[`${He}-small`]:"small"===s.size,[`${He}-large`]:"large"===s.size,[`${He}-loading`]:l},`${He}-shape-${s.shape}`),disabled:d,onMouseDown:s.onMouseDown,onMouseUp:s.onMouseUp,onTouchStart:s.onTouchStart,onTouchEnd:s.onTouchEnd},l?c.createElement("div",{className:`${He}-loading-wrapper`},s.loadingIcon,s.loadingText):c.createElement("span",null,s.children)))})),qe="adm-list",Ye={mode:"default"},Je=i.forwardRef(((e,t)=>{const s=h(Ye,e),n=i.useRef(null);return i.useImperativeHandle(t,(()=>({get nativeElement(){return n.current}}))),v(s,c.createElement("div",{className:u(qe,`${qe}-${s.mode}`),ref:n},s.header&&c.createElement("div",{className:`${qe}-header`},s.header),c.createElement("div",{className:`${qe}-body`},c.createElement("div",{className:`${qe}-body-inner`},s.children))))}));function Xe(e){return null!=e&&!1!==e}const Ze="adm-list-item",Qe=q(Je,{Item:e=>{var t,s;const{arrow:i,arrowIcon:n}=e,{list:r={}}=d(),a=null!==(t=e.clickable)&&void 0!==t?t:!!e.onClick,o=null!==(s=null!=i?i:n)&&void 0!==s?s:a,l=_(r.arrowIcon,!0!==i?i:null,!0!==n?n:null),h=c.createElement("div",{className:`${Ze}-content`},Xe(e.prefix)&&c.createElement("div",{className:`${Ze}-content-prefix`},e.prefix),c.createElement("div",{className:`${Ze}-content-main`},Xe(e.title)&&c.createElement("div",{className:`${Ze}-title`},e.title),e.children,Xe(e.description)&&c.createElement("div",{className:`${Ze}-description`},e.description)),Xe(e.extra)&&c.createElement("div",{className:`${Ze}-content-extra`},e.extra),o&&c.createElement("div",{className:`${Ze}-content-arrow`},l||c.createElement(j,null)));return v(e,c.createElement(a?"a":"div",{className:u(`${Ze}`,a?["adm-plain-anchor"]:[],e.disabled&&`${Ze}-disabled`),onClick:e.disabled?void 0:e.onClick},h))}}),et="adm-skeleton",tt=e=>v(e,c.createElement("div",{className:u(et,{[`${et}-animated`]:e.animated})})),st={lineCount:3},it=q(tt,{Title:e=>v(e,c.createElement(tt,{animated:e.animated,className:`${et}-title`})),Paragraph:e=>{const t=h(st,e),s=function(e,t){const s=[];for(let i=1;i<=t;i++)s.push(i);return s}(0,t.lineCount),i=c.createElement("div",{className:`${et}-paragraph`},s.map((e=>c.createElement(tt,{key:e,animated:t.animated,className:`${et}-paragraph-line`}))));return v(t,i)}}),nt="adm-infinite-scroll",rt={threshold:250,children:(e,t,s)=>c.createElement(ot,{hasMore:e,failed:t,retry:s})},at=e=>{const t=h(rt,e),[s,l]=i.useState(!1),d=function(e){var t=this,s=i.useRef(!1);return i.useCallback((function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return n(t,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:if(s.current)return[2];s.current=!0,t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,e.apply(void 0,a([],o(i),!1))];case 2:return[2,t.sent()];case 3:throw t.sent();case 4:return s.current=!1,[7];case 5:return[2]}}))}))}),[e])}((e=>n(void 0,void 0,void 0,(function*(){try{yield t.loadMore(e)}catch(s){throw l(!0),s}})))),u=i.useRef(null),[m,p]=i.useState({}),f=i.useRef(m),[g,w]=i.useState(),{run:b}=k((()=>n(void 0,void 0,void 0,(function*(){if(f.current!==m)return;if(!t.hasMore)return;const e=u.current;if(!e)return;if(!e.offsetParent)return;const s=S(e);if(w(s),!s)return;const i=e.getBoundingClientRect().top,n=function(e){return e===window}(s)?window.innerHeight:s.getBoundingClientRect().bottom;if(n>=i-t.threshold){const e={};f.current=e;try{yield d(!1),p(e)}catch(r){}}}))),{wait:100,leading:!0,trailing:!0});return i.useEffect((()=>{b()})),i.useEffect((()=>{if(u.current&&g)return g.addEventListener("scroll",e),()=>{g.removeEventListener("scroll",e)};function e(){b()}}),[g]),v(t,c.createElement("div",{className:nt,ref:u},"function"==typeof t.children?t.children(t.hasMore,s,(function(){return n(this,void 0,void 0,(function*(){l(!1);try{yield d(!0),p(f.current)}catch(e){}}))})):t.children))},ot=e=>{const{locale:t}=d();return e.hasMore?e.failed?c.createElement("span",null,c.createElement("span",{className:`${nt}-failed-text`},t.InfiniteScroll.failedToLoad),c.createElement("a",{onClick:()=>{e.retry()}},t.InfiniteScroll.retry)):c.createElement(c.Fragment,null,c.createElement("span",null,t.common.loading),c.createElement(Ve,null)):c.createElement("span",null,t.InfiniteScroll.noMore)};var ct=Object.defineProperty,lt=(e,t,s)=>(((e,t,s)=>{t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s);function dt(e,t){let s;const i=()=>{void 0!==s&&t&&t(s),s=void 0};return[()=>void 0===s?s=e(i):s,i]}const ht=new class{constructor(e,t={}){this.scope=e,this.options=t}print(e,...t){const s=new Date,i=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(s),{textColor:n,bgColor:r}=this.options,a="font-weight: bold;padding: 0 5px;border-radius:5px";console[e](`%c${i}%c / %c${this.scope}`,`${a};background-color: lightblue;color:black`,"",`${a};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...t)}error(...e){this.print("error",...e)}log(...e){this.print("log",...e)}}("SDK",{bgColor:"forestgreen",textColor:"white"});class ut{constructor(){lt(this,"listeners",new Map),lt(this,"listenersCount",0),lt(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(e,...t){this.subscribeListeners.forEach((s=>s({event:e,args:t}))),(this.listeners.get(e)||[]).forEach((([s,i])=>{s(...t),i&&this.off(e,s)}))}on(e,t,s){let i=this.listeners.get(e);return i||this.listeners.set(e,i=[]),i.push([t,s]),this.listenersCount+=1,()=>this.off(e,t)}off(e,t){const s=this.listeners.get(e)||[];for(let i=0;i<s.length;i+=1)if(t===s[i][0])return s.splice(i,1),void(this.listenersCount-=1)}subscribe(e){return this.subscribeListeners.push(e),()=>this.unsubscribe(e)}unsubscribe(e){for(let t=0;t<this.subscribeListeners.length;t+=1)if(this.subscribeListeners[t]===e)return void this.subscribeListeners.splice(t,1)}}function mt(e,t,s){return window.addEventListener(e,t,s),()=>window.removeEventListener(e,t,s)}function pt(...e){let t=!1;const s=e.flat(1);return[e=>!t&&s.push(e),()=>{t||(t=!0,s.forEach((e=>e())))},t]}class ft extends Error{constructor(e,t,s){super(t,{cause:s}),this.type=e,Object.setPrototypeOf(this,ft.prototype)}}function gt(e,t,s){return new ft(e,t,s)}const vt="ERR_METHOD_UNSUPPORTED",wt="ERR_METHOD_PARAMETER_UNSUPPORTED",bt="ERR_UNKNOWN_ENV",xt="ERR_UNEXPECTED_TYPE",yt="ERR_PARSE";function _t(){return gt(xt,"Value has unexpected type")}class jt{constructor(e,t,s){this.parser=e,this.isOptional=t,this.type=s}parse(e){if(!this.isOptional||void 0!==e)try{return this.parser(e)}catch(t){throw gt(yt,"Unable to parse value"+(this.type?` as ${this.type}`:""),t)}}optional(){return this.isOptional=!0,this}}function kt(e,t){return()=>new jt(e,!1,t)}const St=kt((e=>{if("boolean"==typeof e)return e;const t=String(e);if("1"===t||"true"===t)return!0;if("0"===t||"false"===t)return!1;throw _t()}),"boolean");function Tt(e,t){const s={};for(const n in e){const r=e[n];if(!r)continue;let a,o;if("function"==typeof r||"parse"in r)a=n,o="function"==typeof r?r:r.parse.bind(r);else{const{type:e}=r;a=r.from||n,o="function"==typeof e?e:e.parse.bind(e)}try{const e=o(t(a));void 0!==e&&(s[n]=e)}catch(i){throw gt(yt,`Unable to parse field "${n}"`,i)}}return s}function Nt(e){let t=e;if("string"==typeof t&&(t=JSON.parse(t)),"object"!=typeof t||null===t||Array.isArray(t))throw _t();return t}function Et(e,t){return new jt((t=>{const s=Nt(t);return Tt(e,(e=>s[e]))}),!1,t)}const Ct=kt((e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e);if(!Number.isNaN(t))return t}throw _t()}),"number"),Ot=kt((e=>{if("string"==typeof e||"number"==typeof e)return e.toString();throw _t()}),"string");function Mt(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach((e=>{delete window[e]}))}function It(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}const Pt={clipboard_text_received:Et({req_id:Ot(),data:e=>null===e?e:Ot().optional().parse(e)}),custom_method_invoked:Et({req_id:Ot(),result:e=>e,error:Ot().optional()}),popup_closed:{parse:e=>Et({button_id:e=>null==e?void 0:Ot().parse(e)}).parse(e??{})},viewport_changed:Et({height:Ct(),width:e=>null==e?window.innerWidth:Ct().parse(e),is_state_stable:St(),is_expanded:St()})};const[At,Dt]=dt((e=>{const[t,s]=function(){const e=new ut,t=new ut;t.subscribe((t=>{e.emit("event",{name:t.event,payload:t.args[0]})})),[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach((e=>{let t=window;e.forEach(((e,s,i)=>{s!==i.length-1?(e in t||(t[e]={}),t=t[e]):t[e]=It}))}));const[,s]=pt(Mt,mt("resize",(()=>{t.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})})),mt("message",(e=>{if(e.source!==window.parent)return;let s;try{s=function(e){return Et({eventType:Ot(),eventData:e=>e}).parse(e)}(e.data)}catch{return}const{eventType:i,eventData:n}=s,r=Pt[i];try{const e=r?r.parse(n):n;t.emit(...e?[i,e]:[i])}catch(a){ht.error(`An error occurred processing the "${i}" event from the Telegram application.\nPlease, file an issue here:\nhttps://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,s,a)}})),(()=>e.clear()),(()=>t.clear()));return[{on:t.on.bind(t),off:t.off.bind(t),subscribe:t=>e.on("event",t),unsubscribe(t){e.off("event",t)},get count(){return t.count+e.count}},s]}(),i=t.off.bind(t);return t.off=(s,n)=>{const{count:r}=t;i(s,n),r&&!t.count&&e()},[t,s]}),(([,e])=>e()));function $t(){return At()[0]}function Rt(e,t,s){return $t().on(e,t,s)}function Bt(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Lt(e,t){return function(e,t){const s=e.split("."),i=t.split("."),n=Math.max(s.length,i.length);for(let r=0;r<n;r+=1){const e=parseInt(s[r]||"0",10),t=parseInt(i[r]||"0",10);if(e!==t)return e>t?1:-1}return 0}(e,t)<=0}function zt(e,t,s){if("string"==typeof s){if("web_app_open_link"===e){if("try_instant_view"===t)return Lt("6.4",s);if("try_browser"===t)return Lt("7.6",s)}if("web_app_set_header_color"===e&&"color"===t)return Lt("6.9",s);if("web_app_close"===e&&"return_back"===t)return Lt("7.6",s)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return Lt("6.1",t);case"web_app_open_popup":return Lt("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return Lt("6.4",t);case"web_app_switch_inline_query":return Lt("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return Lt("6.9",t);case"web_app_setup_settings_button":return Lt("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return Lt("7.2",t);case"web_app_setup_swipe_behavior":return Lt("7.7",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}let Ft="https://web.telegram.org";function Ut(e,t,s){let i,n={};if(t||s?t&&s?(n=s,i=t):t&&("targetOrigin"in t?n=t:i=t):n={},function(){try{return window.self!==window.top}catch{return!0}}())return window.parent.postMessage(JSON.stringify({eventType:e,eventData:i}),n.targetOrigin||Ft);if(function(e){return"external"in e&&Bt(e.external)&&"notify"in e.external&&"function"==typeof e.external.notify}(window))window.external.notify(JSON.stringify({eventType:e,eventData:i}));else{if(!function(e){return"TelegramWebviewProxy"in e&&Bt(e.TelegramWebviewProxy)&&"postEvent"in e.TelegramWebviewProxy&&"function"==typeof e.TelegramWebviewProxy.postEvent}(window))throw gt(bt,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.");window.TelegramWebviewProxy.postEvent(e,JSON.stringify(i))}}function Wt(e){return(t,s)=>{if(!zt(t,e))throw gt(vt,`Method "${t}" is unsupported in Mini Apps version ${e}`);if(Bt(s)&&"web_app_set_header_color"===t&&"color"in s&&!zt(t,"color",e))throw gt(wt,`Parameter "color" of "${t}" method is unsupported in Mini Apps version ${e}`);return Ut(t,s)}}class Vt{constructor(e){lt(this,"ee",new ut),lt(this,"on",this.ee.on.bind(this.ee)),lt(this,"off",this.ee.off.bind(this.ee)),this.state=e}clone(){return{...this.state}}set(e,t){Object.entries("string"==typeof e?{[e]:t}:e).reduce(((e,[t,s])=>this.state[t]===s||void 0===s?e:(this.state[t]=s,this.ee.emit(`change:${t}`,s),!0)),!1)&&this.ee.emit("change",this.state)}get(e){return this.state[e]}}class Ht{constructor(e){lt(this,"state"),lt(this,"get"),lt(this,"set"),lt(this,"clone"),this.state=new Vt(e),this.set=this.state.set.bind(this.state),this.get=this.state.get.bind(this.state),this.clone=this.state.clone.bind(this.state)}}function Kt(e,t){return s=>zt(t[s],e)}class Gt extends Ht{constructor(e,t,s){super(e),lt(this,"supports"),this.supports=Kt(t,s)}}class qt extends Gt{constructor(e,t,s){super({isVisible:e},t,{show:"web_app_setup_back_button",hide:"web_app_setup_back_button"}),lt(this,"on",((e,t)=>"click"===e?Rt("back_button_pressed",t):this.state.on(e,t))),lt(this,"off",((e,t)=>{return"click"===e?(s=t,void $t().off("back_button_pressed",s)):this.state.off(e,t);var s})),this.postEvent=s}set isVisible(e){this.set("isVisible",e),this.postEvent("web_app_setup_back_button",{is_visible:e})}get isVisible(){return this.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}const Yt=kt((e=>e instanceof Date?e:new Date(1e3*Ct().parse(e))),"Date");function Jt(e,t){return new jt((t=>{if("string"!=typeof t&&!(t instanceof URLSearchParams))throw _t();const s="string"==typeof t?new URLSearchParams(t):t;return Tt(e,(e=>{const t=s.get(e);return null===t?void 0:t}))}),!1,t)}const Xt=Et({id:Ct(),type:Ot(),title:Ot(),photoUrl:{type:Ot().optional(),from:"photo_url"},username:Ot().optional()},"Chat").optional(),Zt=Et({addedToAttachmentMenu:{type:St().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:St().optional(),from:"allows_write_to_pm"},firstName:{type:Ot(),from:"first_name"},id:Ct(),isBot:{type:St().optional(),from:"is_bot"},isPremium:{type:St().optional(),from:"is_premium"},languageCode:{type:Ot().optional(),from:"language_code"},lastName:{type:Ot().optional(),from:"last_name"},photoUrl:{type:Ot().optional(),from:"photo_url"},username:Ot().optional()},"User").optional(),Qt=kt((e=>function(e){const t=e.replace(/\s/g,"").toLowerCase();if(function(e){return/^#[\da-f]{6}$/i.test(e)}(t))return t;if(function(e){return/^#[\da-f]{3}$/i.test(e)}(t)){let e="#";for(let s=0;s<3;s+=1)e+=t[1+s].repeat(2);return e}const s=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!s)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return s.slice(1).reduce(((e,t)=>{const s=parseInt(t,10).toString(16);return e+(1===s.length?"0":"")+s}),"#")}(Ot().parse(e))),"rgb");function es(e){return e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`))}const ts=kt((e=>{const t=Qt().optional();return Object.entries(Nt(e)).reduce(((e,[s,i])=>(e[function(e){return e.replace(/_[a-z]/g,(e=>e[1].toUpperCase()))}(s)]=t.parse(i),e)),{})}),"ThemeParams");function ss(e){return Jt({botInline:{type:St().optional(),from:"tgWebAppBotInline"},initData:{type:Jt({authDate:{type:Yt(),from:"auth_date"},canSendAfter:{type:Ct().optional(),from:"can_send_after"},chat:Xt,chatInstance:{type:Ot().optional(),from:"chat_instance"},chatType:{type:Ot().optional(),from:"chat_type"},hash:Ot(),queryId:{type:Ot().optional(),from:"query_id"},receiver:Zt,startParam:{type:Ot().optional(),from:"start_param"},user:Zt},"InitData").optional(),from:"tgWebAppData"},initDataRaw:{type:Ot().optional(),from:"tgWebAppData"},platform:{type:Ot(),from:"tgWebAppPlatform"},showSettings:{type:St().optional(),from:"tgWebAppShowSettings"},startParam:{type:Ot().optional(),from:"tgWebAppStartParam"},themeParams:{type:ts(),from:"tgWebAppThemeParams"},version:{type:Ot(),from:"tgWebAppVersion"}}).parse(e)}function is(e){return ss(e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function ns(){return is(window.location.href)}function rs(){return performance.getEntriesByType("navigation")[0]}function as(){const e=rs();if(!e)throw new Error("Unable to get first navigation entry.");return is(e.name)}function os(e){return`telegram-apps/${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}`}function cs(e,t){sessionStorage.setItem(os(e),JSON.stringify(t))}function ls(e){const t=sessionStorage.getItem(os(e));try{return t?JSON.parse(t):void 0}catch{}}function ds(){return ss(ls("launchParams")||"")}function hs(e){cs("launchParams",function(e){const{initDataRaw:t,themeParams:s,platform:i,version:n,showSettings:r,startParam:a,botInline:o}=e,c=new URLSearchParams;return c.set("tgWebAppPlatform",i),c.set("tgWebAppThemeParams",function(e){return JSON.stringify(Object.fromEntries(Object.entries(e).map((([e,t])=>[es(e),t]))))}(s)),c.set("tgWebAppVersion",n),t&&c.set("tgWebAppData",t),a&&c.set("tgWebAppStartParam",a),"boolean"==typeof r&&c.set("tgWebAppShowSettings",r?"1":"0"),"boolean"==typeof o&&c.set("tgWebAppBotInline",o?"1":"0"),c.toString()}(e))}function us(){const e=rs();return!(!e||"reload"!==e.type)}const[ms]=dt((function(){let e=0;return()=>(e+=1).toString()}));function ps(e,t){return()=>{const s=function(){const e=[];for(const t of[ns,as,ds])try{const e=t();return hs(e),e}catch(s){e.push(s instanceof Error?s.message:JSON.stringify(s))}throw new Error(["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\n","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\n","Collected errors:",e.map((e=>`— ${e}`))].join("\n"))}(),i={...s,postEvent:Wt(s.version),createRequestId:ms()};if("function"==typeof e)return e(i);const[n,r,a]=pt(),o=t({...i,state:us()?ls(e):void 0,addCleanup:n}),c=t=>(a||n(t.on("change",(t=>{cs(e,t)}))),t);return[o instanceof Promise?o.then(c):c(o),r]}}const fs=ps("backButton",(({postEvent:e,version:t,state:s={isVisible:!1}})=>new qt(s.isVisible,t,e)));class gs{constructor(e,t){lt(this,"supports"),this.supports=Kt(e,t)}}function vs(e,t){return e.startsWith(t)?e:`${t}${e}`}class ws extends gs{constructor(e,t,s){var i,n;super(e,{readTextFromClipboard:"web_app_read_text_from_clipboard"}),lt(this,"supportsParam"),this.version=e,this.createRequestId=t,this.postEvent=s,this.supportsParam=(i=e,n={"openLink.tryInstantView":["web_app_open_link","try_instant_view"]},e=>{const[t,s]=n[e];return zt(t,s,i)})}openLink(e,t){const s=(i=e,new URL("string"==typeof i?i:`${i.pathname||""}${vs(i.search||"","?")}${vs(i.hash||"","#")}`,"http://a")).toString();var i;if(!zt("web_app_open_link",this.version))return void window.open(s,"_blank");const n="boolean"==typeof t?{tryInstantView:t}:t||{};this.postEvent("web_app_open_link",{url:s,try_browser:n.tryBrowser,try_instant_view:n.tryInstantView})}openTelegramLink(e){const{hostname:t,pathname:s,search:i}=new URL(e,"https://t.me");if("t.me"!==t)throw new Error(`URL has not allowed hostname: ${t}. Only "t.me" is allowed`);zt("web_app_open_tg_link",this.version)?this.postEvent("web_app_open_tg_link",{path_full:s+i}):window.location.href=e}async readTextFromClipboard(){const e=this.createRequestId(),{data:t=null}=await async function(e){let t;const s=new Promise((e=>t=e)),{event:i,capture:n,timeout:r}=e,[,a]=pt((Array.isArray(i)?i:[i]).map((e=>Rt(e,(s=>{(!n||(Array.isArray(i)?n({event:e,payload:s}):n(s)))&&t(s)})))));try{return(e.postEvent||Ut)(e.method,e.params),await(r?function(e,t){return Promise.race(["function"==typeof e?e():e,new Promise(((e,s)=>{setTimeout((()=>{s(function(e){return gt("ERR_TIMED_OUT",`Timeout reached: ${e}ms`)}(t))}),t)}))])}(s,r):s)}finally{a()}}({method:"web_app_read_text_from_clipboard",event:"clipboard_text_received",postEvent:this.postEvent,params:{req_id:e},capture:(s=e,({req_id:e})=>e===s)});var s;return t}shareURL(e,t){this.openTelegramLink("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))}}const bs=ps((({version:e,postEvent:t,createRequestId:s})=>new ws(e,s,t)));function xs(e){let t,s=0;for(t=0;t<e.length;t+=1)s=e.charCodeAt(t)+((s<<5)-s);let i="#";for(t=0;t<3;t+=1)i+=`00${(s>>8*t&255).toString(16)}`.slice(-2);return i}function ys(e,t){if(isNaN(e))return e;if(e<1e3)return e;let s=2;return null!=t&&(s=t),e<1e6?(e/1e3).toFixed(s)+"K":e<1e9?(e/1e6).toFixed(s)+"M":(e/1e9).toFixed(s)+"B"}function _s(e,t){let s=!0,i=0,n=0,r=180;if(e&&t){const a=(new Date).getTime(),o=new Date(e).getTime(),c=new Date(t).getTime(),l=o-108e5;a<o?(s=!1,i=.1*Math.round((a-l)/1e3),i=i.toFixed(1),n=Math.ceil(i/1080*100),r=Math.ceil(180*(100-n)/100)||1):c<o&&(s=!1,i=1080,n=100,r=0)}return{canFarming:s,score:i,percent:n,leftTime:r}}function js(e){let t=e;try{e&&(t=e.substring(0,5)+"..."+e.substring(e.length-5))}catch(s){}return t}let ks=(e=class{constructor(){s(this,"events"),this.events={}}static getInstance(){return e.instance||(e.instance=new e),e.instance}addListener(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e,t){const s=this.events[e];s&&s.forEach((e=>e(t)))}},s(e,"instance"),e);function Ss({handleCallBack:e}){const t=N(),s=ks.getInstance(),[n,r]=i.useState(),[a,o]=i.useState(!1),[c,l]=i.useState([]);return i.useEffect((()=>{(async()=>{const e=await O();r(e.data),t(M(e.data)),s.emit("showCongrates",!0)})(),E().then((e=>{l(e.data)}))}),[]),i.useEffect((()=>{(null==n?void 0:n.day)&&setTimeout((()=>{o(!0)}),3e3)}),[n]),C.jsx("div",{className:"checkIn-container",children:C.jsxs("div",{className:"checkIn-first",children:[C.jsx("img",{src:"/assets/hooray-8Kybc2vw.gif",alt:"hooray",className:"hooray "+(a?"change-hooray":"")}),C.jsxs("div",{className:"daily-reward "+(a?"change-daily":""),children:[a?null:C.jsx("div",{className:"day",children:null==n?void 0:n.day}),"Daily Rewards"]}),a?null:C.jsxs("div",{className:"rewards-container "+((null==n?void 0:n.reward_score)?"fadeIn":""),children:[C.jsx("span",{children:"Rewards"}),C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",className:"rewards-logo"}),null==n?void 0:n.reward_score]}),C.jsxs("div",{className:(a?"fadeIn":"")+" rewards-detail",children:[C.jsxs("div",{className:"rewards-detail-top",children:[C.jsxs("div",{className:"rewards-two",children:[C.jsxs("div",{className:"rewards-one",children:[C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo"}),C.jsx("div",{className:"reward-number",children:null==n?void 0:n.reward_score}),C.jsx("div",{className:"unit",children:"$TOMATO"})]}),C.jsxs("div",{className:"rewards-one",children:[C.jsx("img",{src:"/assets/ticket-32x32.webp",alt:"logo"}),C.jsx("div",{className:"reward-number",children:null==n?void 0:n.reward_ticket}),C.jsx("div",{className:"unit",children:"Tickets"})]})]}),C.jsx("div",{className:"check-in-title",children:"Daily Check-in Rewards"}),C.jsx("div",{className:"rewards-list",children:c.map(((e,t)=>C.jsxs("div",{className:"rewards-item "+((null==n?void 0:n.day)>t?"rewards-item-active":""),children:[C.jsxs("div",{className:"rewards-item-left",children:[C.jsx("div",{className:"count",children:e.day}),C.jsx("div",{className:"desc",children:"Day"})]}),C.jsx("div",{className:"rewards-item-right",children:(null==n?void 0:n.day)>t?C.jsx("img",{src:"/assets/toast-success.webp",alt:"check"}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"score-ticket",children:[ys(e.score,0),C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo"})]}),C.jsxs("div",{className:"score-ticket",children:[e.ticket,C.jsx("img",{src:"/assets/ticket-32x32.webp",alt:"logo"})]})]})})]},t)))})]}),C.jsx("div",{className:"rewards-detail-top",children:C.jsx(Ge,{color:"default",style:{fontWeight:"bold",flex:1},onClick:()=>{e()},children:"Continue"})})]})]})})}class Ts extends G.Scene{constructor(){super("Boot")}preload(){this.load.image("dark","assets/bg-Dii2ViR_.webp")}create(){this.scene.start("Preloader")}}const Ns=new G.Events.EventEmitter;class Es extends G.Scene{constructor(){super("GameOver"),s(this,"camera"),s(this,"background"),s(this,"gameOverText")}create(){Ns.emit("current-scene-ready",this)}changeScene(){this.scene.start("MainMenu")}}class Cs extends G.Scene{constructor(){super("Preloader"),s(this,"loadText")}init(){}preload(){this.load.setPath("assets/"),this.load.image("tomato","tomato-32x32.webp"),this.load.image("freezeBg","bg-time-CYBkBj7x.webp"),this.load.image("boomBg","bg-penalty-DosdTnzw.webp"),this.load.image("freeze","time-CffWGaET.gif"),this.load.image("boom","penalty-vbtx_mmt.gif")}create(){Ns.emit("current-scene-ready",this),this.scene.start("MainGame")}}const Os=()=>R({url:"/game/begin",method:"GET"});class Ms extends Phaser.Scene{constructor(){super("MainMenu"),s(this,"fontStyle",{fontFamily:"Arial",fontSize:34,color:"#ffffff",fontStyle:"bold",padding:16,align:"center",lineHeight:36}),s(this,"music"),s(this,"totalScoreText"),s(this,"totalScore",0),s(this,"maxScore",0),s(this,"kouFen",!1),s(this,"target",0)}create(){const e=document.getElementsByClassName("layout"),t=e[0].clientWidth,s=e[0].clientHeight;let i=this.add.image(t/2,s/2,"dark").setInteractive();this.volumeButton(),this.tweens.add({targets:i,alpha:{from:0,to:1},duration:1e3}),this.add.text(t/2,s/2+200,"warning: find two identical expressions\n and eliminate them before clearing the level",{...this.fontStyle,fontSize:13,color:"#f5f5f5"}).setOrigin(.5,.5);const n=this.add.text(t/2,s/2+120,"Click to Play",{align:"center",strokeThickness:4,fontSize:32,fontStyle:"bold",color:"#000000"}).setOrigin(.5).setDepth(3),r=this.add.tween({targets:n,duration:800,ease:e=>e>.8,alpha:0,yoyo:!0,repeat:-1});this.music||(this.music=this.sound.play("music",{loop:!0}));const a=localStorage.getItem("volume")||1;this.sound.setVolume(a);let o=this.add.image(t/2,0,"logo");this.tweens.add({targets:o,y:s/2-50,alpha:{from:0,to:1},ease:"bounce.out",duration:1200}),i.on(Phaser.Input.Events.POINTER_DOWN,(async()=>{if(this.kouFen)return;r.stop(),n.setAlpha(0);const e=await Os();if(0!=e.code)this.sound.play("card-mismatch"),this.totalScoreText.setColor("#e20f0f"),this.cameras.main.shake(300,.01);else{const i=this.add.text(t/2,s/2-250,""+(e.data.score-this.totalScore),{...this.fontStyle,fontSize:22,color:"#ec3942"}).setOrigin(.5,.5);this.tweens.add({targets:i,alpha:{from:1,to:0},duration:1500}),this.kouFen=!0,this.target=e.data.score,this.registry.set("totalScore",e.data.score)}})),Ns.emit("current-scene-ready",this)}volumeButton(){const e=this.add.image(25,30,"volume-icon").setName("volume-icon");e.setInteractive(),e.on(Phaser.Input.Events.POINTER_OVER,(()=>{this.input.setDefaultCursor("pointer")})),e.on(Phaser.Input.Events.POINTER_OUT,(()=>{console.log("Mouse leave"),this.input.setDefaultCursor("default")}));const t=localStorage.getItem("volume")||1;e.setTexture(1==t?"volume-icon":"volume-icon_off"),e.setAlpha(1==t?1:.5),console.log(t),e.on(Phaser.Input.Events.POINTER_DOWN,(()=>{0===this.sound.volume?(this.sound.setVolume(1),localStorage.setItem("volume","1"),e.setTexture("volume-icon"),e.setAlpha(1)):(localStorage.setItem("volume","0"),this.sound.setVolume(0),e.setTexture("volume-icon_off"),e.setAlpha(.5))}))}update(){this.kouFen&&(this.totalScore=this.totalScore-20,this.totalScore<this.target?(this.totalScoreText.setText(`Score: ${this.target}`),this.target-this.totalScore>500&&(this.scene.start("MainGame"),this.kouFen=!1)):this.totalScoreText.setText(`Score: ${this.totalScore}`))}showTotal(e){const t=document.getElementsByClassName("layout"),s=t[0].clientWidth,i=t[0].clientHeight;this.totalScore?(this.totalScore=this.registry.get("totalScore"),this.maxScore=this.registry.get("maxScore")):(this.totalScore=e.score,this.maxScore=e.game_max_score,this.registry.set("totalScore",this.totalScore),this.registry.set("maxScore",this.maxScore)),this.totalScoreText=this.add.text(s/2,i/2-220,`Score:${this.totalScore||0}`,this.fontStyle).setOrigin(.5,.5),this.tweens.add({targets:this.totalScoreText,alpha:{from:0,to:1},scale:{from:0,to:1},duration:1e3});const n=this.add.text(s/2,i/2-180,`High Score: ${this.maxScore||0}`,{...this.fontStyle,fontSize:24}).setOrigin(.5,.5).setAlpha(0);this.tweens.add({targets:n,alpha:{from:0,to:1},scale:{from:.5,to:1},duration:800,delay:500})}}class Is extends Phaser.Scene{constructor(){super("MainGame"),s(this,"score",0),s(this,"scoreText"),s(this,"timer"),s(this,"shakeTimer"),s(this,"timerText"),s(this,"width",0),s(this,"height",0),s(this,"autoCreateTimer"),s(this,"images",[]),s(this,"freeze",!1),s(this,"timerCount",60),s(this,"fontStyle",{fontFamily:"Arial",fontSize:20,color:"#000000",fontStyle:"bold"}),this.score=0,this.scoreText,this.timer=null,this.timerText,this.shakeTimer,this.freeze=!1}init(){this.cameras.main.fadeIn(500)}create(){const e=document.getElementsByClassName("layout"),t=e[0].clientWidth,s=e[0].clientHeight;this.width=t,this.height=s,this.add.image(t/2,s/2,"dark").setScale(t/1125,s/2115);const i=this.add.graphics({x:50,y:50}).setDepth(1e3);i.fillStyle(16777215,.3),i.fillRoundedRect(0,0,70,30,12).setPosition(10,5),i.fillStyle(16711935,1),this.timerText=this.add.text(45,20,`${this.timerCount}:00`,this.fontStyle).setOrigin(.5,.5).setDepth(1e3),this.scoreText=this.add.text(t-30,20,`${this.score}`,this.fontStyle).setOrigin(.5,.5).setDepth(1e3),this.add.image(t-60,20,"tomato").setScale(.7,.7).setDepth(1e3),Ns.emit("current-scene-ready",this),setTimeout((()=>{this.start()}),1e3)}start(){this.score=0,this.timer=this.time.addEvent({delay:1e3*this.timerCount,callback:this.gameOver,callbackScope:this}),this.autoCreateTimer=setInterval((()=>{this.autoCreateIcon()}),150)}reStart(){this.freeze=!1,this.timer=this.time.addEvent({delay:1e3*this.timerCount,callback:this.gameOver,callbackScope:this}),this.autoCreateTimer=setInterval((()=>{this.autoCreateIcon()}),150)}autoCreateIcon(){let e="tomato",t=Math.max(5*Math.random(),1),s=80*Math.random()+30;const i=Math.random();i<.95?e="tomato":i<.98?this.images.filter((e=>"freeze"==e.type)).length||(e="freeze",s=40*(Math.random()+1),t=2.5):(e="boom",s=40*(Math.random()+1),t=2.5);let n=Math.random()*this.width;n<s/2&&(n=s/2+12),n>this.width-s/2&&(n=this.width-s/2-12);let r=1;s>40&&(r=2),s>60&&(r=3),s>80&&(r=5);const a=this.add.image(n,0,e).setInteractive().setScale(s/160,s/160).setDepth(10);"tomato"==e&&a.setScale(s/32,s/32).setDepth(5),this.images.push({icon:a,speed:t,maxY:this.height+200,type:e}),a.on("pointerdown",(()=>{if("boom"==e){this.shake(),this.score=Math.max(this.score-200,0),this.scoreText.setText(this.score).setColor("#ffffff");const t=1125,s=2115,i=this.add.image(this.width/2,this.height/2,`${e}Bg`).setScale(this.width/t,this.height/s);setTimeout((()=>{i.destroy(),this.scoreText.setColor("#000000")}),1e3)}if("freeze"==e){this.freeze=!0,this.timerCount=Math.round((this.timer.delay-this.timer.elapsed)/1e3),this.time.removeEvent(this.timer),this.timer=null,clearInterval(this.autoCreateTimer);const t=1125,s=2115,i=this.add.image(this.width/2,this.height/2,`${e}Bg`).setScale(this.width/t,this.height/s);Ns.emit("execTypeCmd",e),setTimeout((()=>{this.reStart(),i.destroy(),Ns.emit("execTypeCmd","")}),4e3)}if("tomato"==e){const e=this.add.text(a.x,a.y,`+${r}`,{fontSize:24,color:"#ffffff",stroke:"#000000",strokeThickness:2,fontStyle:"bold"}).setDepth(10);this.add.tween({targets:e,alpha:{from:1,to:0},ease:"Linear",duration:1e3}),this.score+=r,this.scoreText.setText(this.score),Ns.emit("execBoom",{left:a.x,top:a.y,show:!0}),setTimeout((()=>{Ns.emit("execBoom",{left:a.x,top:a.y,show:!1})}),300)}a.destroy()}))}shake(){this.cameras.main.shake(100,.01)}update(){if(this.timer)if(1===this.timer.getProgress())this.timerText.setText("00:00"),this.timer=null,clearInterval(this.autoCreateTimer);else{const e=(this.timerCount-this.timer.getElapsedSeconds()).toPrecision(4),t=e.indexOf(".");let s=e.substring(0,t),i=e.substr(t+1,2);s=Phaser.Utils.String.Pad(s,2,"0",1),this.timerText.setText(s+":"+i),this.freeze||this.images.map(((e,t)=>{e.icon.y+=e.speed,e.icon.y>e.maxY&&this.images.splice(t,1),"tomato"!==e.type&&(e.icon.rotation+=.05*Math.random())}))}}async gameOver(){this.time.removeEvent(this.timer),localStorage.setItem("currentScore",this.score),setTimeout((()=>{this.scene.start("GameOver")}),1e3)}}const Ps={type:G.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#f5f5f5",scene:[Ts,Cs,Ms,Is,Es]},As=i.forwardRef((function({currentActiveScene:e,size:t},s){const n=i.useRef(null),r=i.useRef(),[a,o]=i.useState(""),[c,l]=i.useState({show:!1,top:0,left:0});return i.useLayoutEffect((()=>(null===n.current&&(n.current=(()=>{const e=document.getElementsByClassName("layout"),t=e[0].clientWidth,s=e[0].clientHeight;return new G.Game({...Ps,parent:"game-container",width:t,height:s})})(),"function"==typeof s?s({game:n.current,scene:null}):s&&(s.current={game:n.current,scene:null})),()=>{n.current&&(n.current.destroy(!0),null!==n.current&&(n.current=null))})),[s]),i.useEffect((()=>(Ns.on("current-scene-ready",(t=>{e&&"function"==typeof e&&e(t),"function"==typeof s?s({game:n.current,scene:t}):s&&(s.current={game:n.current,scene:t})})),Ns.on("execTypeCmd",(e=>{o(e)})),Ns.on("execBoom",(e=>{l(e)})),()=>{Ns.removeListener("current-scene-ready"),Ns.removeListener("execTypeCmd"),Ns.removeListener("execBoom")})),[e,s]),C.jsxs("div",{ref:r,children:[C.jsx("div",{id:"game-container"}),C.jsxs("div",{className:"freeze-gif",style:{opacity:"freeze"==a?1:0,zIndex:"freeze"==a?10:-1},children:[C.jsx("img",{src:"/assets/dec-time-BT6zB6Ta.gif",alt:"gif",className:"tl"}),C.jsx("img",{src:"/assets/dec-time-BT6zB6Ta.gif",alt:"gif",className:"tr"}),C.jsx("img",{src:"/assets/dec-time-BT6zB6Ta.gif",alt:"gif",className:"bl"}),C.jsx("img",{src:"/assets/dec-time-BT6zB6Ta.gif",alt:"gif",className:"br"})]}),C.jsx("img",{src:"/assets/effect-qVjb36sg.gif",alt:"boom",className:"get-score",style:{left:c.left,top:c.top,opacity:c.show?1:0,zIndex:c?10:-1}})]})}));function Ds({username:e,score:t,rank:s}){return C.jsxs("div",{className:"holders-item",children:[C.jsxs("div",{className:"holders-left",children:[C.jsx("div",{className:"icon",style:{background:xs(e)},children:e.slice(0,2)}),C.jsxs("div",{className:"name-score-wrapper",children:[C.jsx("div",{className:"name",children:e}),C.jsxs("div",{className:"name-score",children:[t.toLocaleString()," TOMATO"]})]})]}),C.jsx("div",{className:"right",children:1==s?C.jsx("img",{src:"/assets/no1.png",alt:"no1"}):2==s?C.jsx("img",{src:"/assets/no2.png",alt:"no2"}):3==s?C.jsx("img",{src:"/assets/no3.png",alt:"no3"}):`#${s}`})]})}const $s=[{path:"/",Component:()=>{var e;const t=N(),s=I(),n=P((e=>e.user.info)),[r,a]=i.useState(!1),[o,c]=i.useState(!0),[l,d]=i.useState(!1),[h,u]=i.useState(!0),[m,p]=i.useState(!1),[f,g]=i.useState(!1),v=i.useRef(),w=i.useRef(),b=ks.getInstance(),[x,y]=i.useState({score:0,canFarming:!0,percent:0,leftTime:180}),_=async()=>{if(!f&&(g(!0),!x.canFarming)){const e=await $();setTimeout((()=>{g(!1)}),1500),p(!0),0==e.code&&t(M(e.data))}};return i.useEffect((()=>{}),[]),i.useEffect((()=>{h||setTimeout((()=>{u(!0)}),1e3)}),[h]),i.useEffect((()=>{m&&setTimeout((()=>{p(!1)}),1500)}),[m]),i.useEffect((()=>{if(v.current&&clearInterval(v.current),n.end_farm_time&&n.last_farming_time){const e=_s(n.end_farm_time,n.last_farming_time);y(e),v.current=setInterval((()=>{const e=_s(n.end_farm_time,n.last_farming_time);y(e)}),1e3)}return()=>{clearInterval(v.current),w.current&&clearInterval(w.current)}}),[n]),C.jsxs("div",{className:"home-page fadeIn",children:[r?C.jsx(A,{}):o?null:C.jsx(Ss,{handleCallBack:()=>c(!0)}),C.jsxs("div",{className:"top-title",children:[C.jsx("div",{className:"score",children:null==(e=null==n?void 0:n.score)?void 0:e.toLocaleString()}),C.jsxs("div",{className:"unit",children:[C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"unit"}),C.jsx("span",{children:"$TOMATO"})]})]}),C.jsxs("div",{className:"tree",onClick:()=>_(),children:[x.canFarming?C.jsx("img",{src:"/assets/start.gif",alt:"tree"}):100!=x.percent?C.jsx("img",{src:`/assets/${f?"shake":"progress"}.gif`,alt:"tree"}):C.jsx("img",{src:"/assets/full.gif",alt:"tree"}),C.jsxs("div",{className:"add-score "+(m?"fadeOut":""),children:["+ ",n.farm_reward_score]})]}),C.jsxs("div",{className:"btn-container",children:[C.jsxs("div",{className:"btn-top",children:[C.jsxs("div",{className:"btn-top-left",children:[C.jsx("div",{className:"question",onClick:()=>d(!0),children:C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5414",width:"32",height:"32",children:C.jsx("path",{d:"M845.902988 0.000232H178.097244A177.864812 177.864812 0 0 0 0.000232 178.097244v667.805744a177.864812 177.864812 0 0 0 178.097012 178.097012h667.805744a177.864812 177.864812 0 0 0 178.097012-178.097012V178.097244A177.864812 177.864812 0 0 0 845.902988 0.000232zM512.000116 911.615445A75.929234 75.929234 0 1 1 587.929351 835.91841a77.090232 77.090232 0 0 1-75.929235 75.697035z m75.929235-340.172258v51.548287a75.929234 75.929234 0 0 1-151.858469 0v-114.938749a75.697035 75.697035 0 0 1 75.929234-75.929235A84.056217 84.056217 0 1 0 428.176099 348.299473a76.161434 76.161434 0 1 1-152.090669 0 235.914686 235.914686 0 1 1 311.843921 223.375913z",fill:"#040000","p-id":"5415"})})}),x.canFarming?C.jsx("div",{className:"anima",onClick:()=>u(!1),children:h?C.jsx("img",{src:"/assets/cat-C2MDjmcF.gif",alt:"cat",width:32}):C.jsx("img",{src:"/assets/cat-touched-Bmke-Bss.gif",alt:"cat",width:32})}):null]}),C.jsxs("div",{className:"btn-top-right",onClick:()=>(async()=>{n.ticket&&s("/game")})(),children:["play now ",n.ticket]})]}),C.jsxs("div",{className:"btn-bot",children:[C.jsx("div",{className:"progress",style:{width:x.percent+"%"}}),x.canFarming?C.jsx("div",{className:"btn-bot-content",onClick:()=>(async()=>{const e=await D();t(M(e.data))})(),children:"Start Farming"}):C.jsxs("div",{className:"btn-bot-farming "+(1080==x.score?"btn-bot-farmed":""),onClick:()=>(async()=>{1080==x.score&&(await _(),b.emit("showCongrates",!0))})(),children:[C.jsx("span",{className:"btn-farming",children:1080==x.score?C.jsxs("div",{children:[C.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8689",width:"16",height:"16",children:[C.jsx("path",{d:"M648.743382 404.237493c121.111302 123.798399 170.182811 274.361137 109.637824 336.270999l-2.473836 2.38853-2.921685 2.516488-3.369534 2.665771-3.83871 2.83638-4.265233 2.964337-4.713083 3.113621-5.182259 3.262903-5.608782 3.412187-9.255556 5.39552-6.739069 3.774732-10.96165 5.95-11.942653 6.269893-12.966309 6.611112-9.191578 4.585126-14.651077 7.144266-26.657709 12.667743-17.316847 8.061291-31.136204 14.139248-41.052871 18.169895-45.083517 19.513442-40.647674 17.274195-43.441401 18.191221-46.277783 19.108245-69.437999 28.32115-52.974198 21.326167-102.856103 40.796957a38.173839 38.173839 0 0 1-41.415416-8.914338l-37.83262-38.66434a40.263803 40.263803 0 0 1-8.743728-42.332442l26.998927-71.293375 37.875272-98.505565 23.629393-60.523662 25.911293-65.386027 24.162547-59.798572 19.300181-46.768284 15.098926-35.82796 14.181901-32.970254 10.705736-24.31183 10.129929-22.47778 7.22957-15.674733 9.106274-19.257529 6.461828-13.264875 6.141936-12.219894 5.822044-11.174911 7.250897-13.328855 3.412186-5.971326 4.84104-8.103944 3.028316-4.819713 2.921685-4.350539 2.751075-3.924014 2.623119-3.454839 2.452509-2.985664 2.345878-2.537813c60.566314-61.909862 207.823496-11.729392 328.934798 112.111659z",fill:"#CF411C","p-id":"8690"}),C.jsx("path",{d:"M634.945352 418.035523c-112.602161-115.097323-246.445184-161.993563-298.353074-115.012018l-2.55914 2.473835-1.663441 1.748746-1.962008 2.345878-2.217921 2.921685-2.452509 3.454839-2.665771 3.987993-2.772402 4.414517-4.649104 7.741398-3.220251 5.630108-7.080288 12.987636-5.67276 10.940324-6.035305 12.027958-6.376524 13.030288-9.042295 19.086919-7.144266 15.504123-10.065951 22.328497-10.620431 24.162547-14.139248 32.842297-15.034948 35.678677-19.257529 46.640327-24.098568 59.670615-25.889967 65.300723-23.58674 60.438357-37.83262 98.42026-26.998928 71.272049a20.537099 20.537099 0 0 0 2.72975 19.534769l1.706093 1.983334 37.811294 38.643014c4.798388 4.926345 11.686739 6.824373 18.127242 5.224911l2.409857-0.767742 102.749472-40.775631 52.888893-21.283515 69.395347-28.278497 46.171152-19.065593 43.356097-18.148568 40.519717-17.231543 44.934233-19.449464 40.882262-18.105916 30.986921-14.07527 17.167564-7.975986 26.465773-12.582439 14.501793-7.080287 9.063621-4.499821 12.753048-6.504481 11.708066-6.141936 10.705735-5.822044 6.483155-3.625448 8.95699-5.203585 5.331542-3.241577 4.819714-3.049642 4.350538-2.857706 3.817384-2.644445 3.305555-2.409857 2.72975-2.153943 2.175269-1.83405 2.025986-1.940681c50.543015-51.673302 4.947671-191.530305-109.637824-308.674939z",fill:"#F66E2E","p-id":"8691"}),C.jsx("path",{d:"M336.592278 303.023505c51.90789-46.981546 185.750913-0.085305 298.353074 115.012018 81.636567 83.470617 128.255567 178.457364 130.046965 244.867047l-1.10896 1.023656-2.175269 1.834051-2.72975 2.153943-3.305556 2.431183-3.83871 2.644444-4.329211 2.857707-4.84104 3.049642-5.331542 3.220251-8.95699 5.203584-6.461829 3.625449-10.705735 5.822043-11.729392 6.141936-12.731722 6.504481-9.063621 4.521148-14.501793 7.080287-26.444447 12.582439-17.188891 7.975986-30.98692 14.07527-40.882262 18.105916-44.934233 19.449464-40.519717 17.210217-43.356098 18.148568-46.171151 19.086919-69.374021 28.257171-52.888893 21.304841-102.792125 40.775631-69.864522 31.605379-9.810037-10.023298-1.684767-1.962008a20.515773 20.515773 0 0 1-3.497492-17.018281l0.767742-2.516488 26.998928-71.272049 37.83262-98.42026 23.58674-60.438357 25.889967-65.300723 24.098568-59.670615 19.257529-46.640327 15.034948-35.700003 14.139248-32.820971 10.620431-24.162547 10.065951-22.328497 7.144266-15.504123 9.042295-19.086919 6.376524-13.030288 6.035305-12.027958 5.67276-10.940324 7.080288-12.987636 3.198925-5.630108 4.649104-7.741398 2.793728-4.414517 2.665771-3.987993 2.452509-3.454839 2.217921-2.921685 1.962008-2.345878 1.642114-1.748746 2.55914-2.473835z",fill:"#FD9816","p-id":"8692"}),C.jsx("path",{d:"M391.933681 285.258808h-2.836381c-22.008604 0.426523-39.66667 6.419176-52.078499 17.380826l-2.985663 2.857706-1.663441 1.748746-1.962008 2.345878-2.217921 2.921685-2.452509 3.454839-2.665771 3.987993-2.772402 4.414517-4.649104 7.741398-3.220251 5.630108-7.080288 12.987636-5.67276 10.940324-6.035305 12.027958-6.376524 13.030288-9.042295 19.086919-7.144266 15.504123-10.065951 22.328497-10.620431 24.162547-14.608424 33.929932 1.535484 9.212904a1018.687012 1018.687012 0 0 0 144.143562 373.805052l7.720072 11.96398 8.359858-3.433513 43.356097-18.148568 10.129929-4.329212-2.985663-7.592115c-70.696243-181.48568-90.29499-380.181576-57.090149-572.436971l0.981004-5.544803zM161.675057 683.418343l-9.703406 24.525092-24.077242 61.696601 3.28423 9.490144a1013.35547 1013.35547 0 0 0 79.397319 170.737292l9.340861 15.696058 9.170252-3.625448 38.579035-15.568102L263.123633 938.351342A1056.519632 1056.519632 0 0 1 166.302835 701.119061l-4.649104-17.700718z",fill:"#FFD217","p-id":"8693"}),C.jsx("path",{d:"M319.808584 292.125834c60.566314-61.909862 207.823496-11.729392 328.934798 112.111659 121.111302 123.798399 170.182811 274.361137 109.637824 336.270999-60.566314 61.909862-207.823496 11.729392-328.934798-112.090333-121.132628-123.819725-170.204138-274.382463-109.637824-336.292325z",fill:"#CF411C","p-id":"8694"}),C.jsx("path",{d:"M634.945352 418.035523c-114.50019-117.05933-251.008984-163.5717-301.338738-112.090333-50.543015 51.651976-4.947671 191.508978 109.616498 308.653613 114.521516 117.080656 251.008984 163.5717 301.360064 112.111659 50.543015-51.673302 4.947671-191.530305-109.637824-308.674939z",fill:"#B03414","p-id":"8695"}),C.jsx("path",{d:"M590.203054 115.310584a9.68208 9.68208 0 0 1 12.369177 6.013979c33.482082 96.436927 15.35484 177.433708-36.297136 248.215256-5.886022 8.061291-12.006632 15.717385-18.596418 23.373479l-8.061291 9.106273-17.700718 18.980289a9.618101 9.618101 0 0 1-13.6914 0.55448 9.895341 9.895341 0 0 1-0.533154-13.862008l17.615414-18.91631 1.27957-1.407527c8.807707-9.810037 16.63441-19.321507 24.077243-29.494089 48.090506-65.897856 64.746243-140.326178 33.610038-230.045362a9.852689 9.852689 0 0 1 5.928675-12.51846z",fill:"#17BA55","p-id":"8696"}),C.jsx("path",{d:"M677.149836 535.905247c92.704847-69.54463 183.149121-92.982087 271.140885-44.187818 4.691757 2.601792 6.39785 8.573119 3.838711 13.328854a9.639427 9.639427 0 0 1-13.179572 3.881363c-79.823843-44.273122-162.953241-22.733694-250.241241 42.737638a626.776044 626.776044 0 0 0-35.038893 28.427781l-36.041222 32.053228-2.025985 1.706094a9.618101 9.618101 0 0 1-13.648747-1.428853 9.895341 9.895341 0 0 1 1.428853-13.819357l28.363802-25.250181a689.709562 689.709562 0 0 1 45.403409-37.448749z",fill:"#FC5965","p-id":"8697"}),C.jsx("path",{d:"M735.071705 284.448413a9.703406 9.703406 0 0 1 11.68674 7.272223c12.753048 54.381725-20.174554 105.671157-83.662553 156.17152-9.852689 7.826703-20.089249 15.376166-31.200182 23.074913l-19.406812 13.051614-19.577421 12.7957a9.639427 9.639427 0 0 1-13.435485-2.857706 9.895341 9.895341 0 0 1 1.27957-12.326525l1.642115-1.322222 30.219178-19.854661c14.07527-9.490144 26.615056-18.553765 38.493731-28.001258 58.092479-46.192477 87.224022-91.57456 76.774201-136.188901a9.810037 9.810037 0 0 1 7.186918-11.814697z",fill:"#FFD217","p-id":"8698"}),C.jsx("path",{d:"M273.232236 239.364897l-0.213262-3.540144a35.870613 35.870613 0 0 0-2.985663-10.876345 44.934234 44.934234 0 0 0-5.67276-9.148926 94.453593 94.453593 0 0 0-11.302869-11.836022l-5.096954-4.414517-16.293191-13.52079c-25.889967-21.710038-36.254484-37.064878-33.71667-56.57832 3.625448-28.171866 17.977959-41.628678 45.382083-42.716312a9.767384 9.767384 0 0 0 9.319535-10.193908 9.746058 9.746058 0 0 0-10.087277-9.426166c-36.915595 1.492832-59.009504 22.179214-63.850544 59.777246-3.497491 26.934949 8.615771 46.533696 36.105201 70.440329l21.880647 18.276525c5.736739 4.947671 9.68208 8.829033 12.433155 12.369177 1.471506 1.855377 2.537814 3.56147 3.220252 5.11828a16.058604 16.058604 0 0 1 1.364874 4.905018c0.895699 8.189248-4.371864 18.169894-15.418818 30.496419l-4.137277 4.39319-13.179571 13.328854-4.926344 5.267564a9.895341 9.895341 0 0 0 1.215591 13.819356c3.604122 3.049642 8.743728 2.985663 12.262546 0.149283l5.694087-5.907348 13.90466-14.053944c15.738711-16.570432 24.397135-30.858963 24.098569-46.128499z",fill:"#CF411C","p-id":"8699"}),C.jsx("path",{d:"M742.685147 823.829826l3.518817 0.255914c3.668101 0.405197 7.272223 1.407527 10.748388 3.006989 3.049642 1.407527 6.035305 3.326882 9.042295 5.715413 3.753405 2.985663 7.464158 6.67509 11.68674 11.452151l4.39319 5.139607 13.35018 16.485127c21.454124 26.209859 36.659681 36.659681 55.959862 34.121867 27.830648-3.689427 41.138176-18.19122 42.225811-45.936564a9.746058 9.746058 0 0 1 10.06595-9.404839c5.374194 0.213262 9.532797 4.777061 9.319535 10.193907-1.471506 37.342118-21.944626 59.691941-59.094808 64.618286-26.657709 3.497491-46.021868-8.743728-69.651261-36.55305l-18.063263-22.136561a91.851801 91.851801 0 0 0-12.219894-12.582439 25.356812 25.356812 0 0 0-5.054301-3.241577 15.610754 15.610754 0 0 0-4.84104-1.386201c-8.12527-0.895699-17.977959 4.435843-30.1552 15.610754l-4.371864 4.158603-13.179572 13.35018-3.924014 3.83871a35.081544 35.081544 0 0 1-1.27957 1.151613 9.618101 9.618101 0 0 1-13.648747-1.236917 9.895341 9.895341 0 0 1-0.149283-12.41183l5.843369-5.758065 13.883335-14.07527c16.399822-15.887994 30.496419-24.653049 45.595345-24.354482zM356.318982 1.748746a9.639427 9.639427 0 0 1 13.499464 2.473835c33.524734 48.900901 44.891581 117.848398 13.456811 218.166687a9.68208 9.68208 0 0 1-12.155915 6.39785 9.831363 9.831363 0 0 1-6.333872-12.326524c29.579393-94.410941 19.236203-157.045893-10.918997-201.063102a9.895341 9.895341 0 0 1 2.452509-13.648746zM709.821524 203.089087a19.620074 19.620074 0 0 1 19.364159 19.812009 19.620074 19.620074 0 0 1-19.364159 19.833335 19.620074 19.620074 0 0 1-19.406812-19.833335 19.620074 19.620074 0 0 1 19.406812-19.833335z",fill:"#FD9816","p-id":"8700"}),C.jsx("path",{d:"M477.217022 222.901096a19.620074 19.620074 0 0 1 19.385486 19.833335 19.620074 19.620074 0 0 1-19.406812 19.790683 19.620074 19.620074 0 0 1-19.36416-19.812009 19.620074 19.620074 0 0 1 19.385486-19.833335z",fill:"#FC5965","p-id":"8701"}),C.jsx("path",{d:"M787.34214 539.957219a19.620074 19.620074 0 0 1 19.385486 19.812009 19.620074 19.620074 0 0 1-19.385486 19.812009 19.620074 19.620074 0 0 1-19.385485-19.833336 19.620074 19.620074 0 0 1 19.406811-19.790682z",fill:"#17BA55","p-id":"8702"}),C.jsx("path",{d:"M903.633728 282.358449a19.620074 19.620074 0 0 1 19.406812 19.812009 19.620074 19.620074 0 0 1-19.406812 19.812009 19.620074 19.620074 0 0 1-19.364159-19.833335 19.620074 19.620074 0 0 1 19.364159-19.812009z",fill:"#CF411C","p-id":"8703"}),C.jsx("path",{d:"M453.736912 81.359327l-13.307528-12.561113 17.679392-4.051971c18.041937-4.158603 35.038892-17.807349 46.917567-37.662011l11.644088-19.449464 0.55448 22.776346c0.575807 23.288174 8.637098 43.782621 22.221866 56.620973l13.328854 12.539786-17.679392 4.051972c-18.041937 4.179929-35.060218 17.807349-46.917567 37.683337l-11.644087 19.449464-0.554481-22.797673c-0.575807-23.266848-8.637098-43.782621-22.243192-56.599646zM895.231218 576.16905l8.40251-16.421149 8.423836 16.421149c8.594445 16.741041 25.889967 30.005917 47.727961 36.595702l21.390146 6.440503-21.390146 6.461828c-21.837995 6.589786-39.133516 19.833335-47.727961 36.595702l-8.423836 16.399823-8.40251-16.399823c-8.594445-16.741041-25.889967-30.005917-47.727961-36.595702l-21.390145-6.461828 21.390145-6.440503c21.837995-6.611112 39.133516-19.854661 47.727961-36.595702z",fill:"#FFE20D","p-id":"8704"})]}),"  Harvest"]}):"Farming"}),C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo"}),C.jsxs("span",{className:"btn-number",children:[x.score," / 1080"]}),1080!=x.score?C.jsxs("div",{className:"left-time",children:[x.leftTime,"m"]}):null]})]})]}),C.jsxs(Fe,{visible:l,onMaskClick:()=>{d(!1)},bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[C.jsxs("div",{className:"popup-rule-title",children:[C.jsx("div",{children:"Rules"}),C.jsx("svg",{onClick:()=>d(!1),className:"close-svg",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5777",width:"18",height:"18",children:C.jsx("path",{d:"M597.795527 511.488347 813.564755 295.718095c23.833825-23.833825 23.833825-62.47489 0.001023-86.307691-23.832801-23.832801-62.47489-23.833825-86.307691 0L511.487835 425.180656 295.717583 209.410404c-23.833825-23.833825-62.475913-23.833825-86.307691 0-23.832801 23.832801-23.833825 62.47489 0 86.308715l215.769228 215.769228L209.410915 727.258599c-23.833825 23.833825-23.833825 62.47489 0 86.307691 23.832801 23.833825 62.473867 23.833825 86.307691 0l215.768205-215.768205 215.769228 215.769228c23.834848 23.833825 62.475913 23.832801 86.308715 0 23.833825-23.833825 23.833825-62.47489 0-86.307691L597.795527 511.488347z",fill:"#272636","p-id":"5778"})})]}),C.jsx("div",{className:"popup-rule-wrapper",children:C.jsxs("div",{className:"popup-rule-content",children:[C.jsxs("div",{className:"popup-rule-content-title",children:[C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5414",width:"16",height:"16",children:C.jsx("path",{d:"M845.902988 0.000232H178.097244A177.864812 177.864812 0 0 0 0.000232 178.097244v667.805744a177.864812 177.864812 0 0 0 178.097012 178.097012h667.805744a177.864812 177.864812 0 0 0 178.097012-178.097012V178.097244A177.864812 177.864812 0 0 0 845.902988 0.000232zM512.000116 911.615445A75.929234 75.929234 0 1 1 587.929351 835.91841a77.090232 77.090232 0 0 1-75.929235 75.697035z m75.929235-340.172258v51.548287a75.929234 75.929234 0 0 1-151.858469 0v-114.938749a75.697035 75.697035 0 0 1 75.929234-75.929235A84.056217 84.056217 0 1 0 428.176099 348.299473a76.161434 76.161434 0 1 1-152.090669 0 235.914686 235.914686 0 1 1 311.843921 223.375913z",fill:"#040000","p-id":"5415"})}),"How to Earn",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16})]}),C.jsxs("ul",{children:[C.jsxs("li",{children:["Check in daily to get ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16})," and an additional ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16})," if you do it consecutively!"]}),C.jsxs("li",{children:["Grow your tomatoes to harvest ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16})," rewards!"]}),C.jsxs("li",{children:["Check in daily to receive ",C.jsx("img",{src:"/assets/ticket-32x32.webp",alt:"logo",width:16,height:16})," and earn more ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16}),"."]}),C.jsxs("li",{children:["Invite frens to earn more ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16}),"."]}),C.jsxs("li",{children:[C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3174","data-spm-anchor-id":"a313x.search_index.0.i5.2b3c3a81TUgFeH",width:"16",height:"16",children:C.jsx("path",{d:"M42.666667 896l938.666667 0-469.333333-810.666667-469.333333 810.666667zM554.666667 768l-85.333333 0 0-85.333333 85.333333 0 0 85.333333zM554.666667 597.333333l-85.333333 0 0-170.666667 85.333333 0 0 170.666667z",fill:"#ecc115","p-id":"3175","data-spm-anchor-id":"a313x.search_index.0.i0.2b3c3a81TUgFeH"})})," ",C.jsx("img",{src:"/assets/ticket-32x32.webp",alt:"logo",width:16,height:16})," will be reset at 8:00 AM (UTC+8) every day!"]}),C.jsxs("li",{children:[C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3174","data-spm-anchor-id":"a313x.search_index.0.i5.2b3c3a81TUgFeH",width:"16",height:"16",children:C.jsx("path",{d:"M42.666667 896l938.666667 0-469.333333-810.666667-469.333333 810.666667zM554.666667 768l-85.333333 0 0-85.333333 85.333333 0 0 85.333333zM554.666667 597.333333l-85.333333 0 0-170.666667 85.333333 0 0 170.666667z",fill:"#ecc115","p-id":"3175","data-spm-anchor-id":"a313x.search_index.0.i0.2b3c3a81TUgFeH"})})," Harvest your ripe ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"logo",width:16,height:16})," within 6 hours!"]})]})]})})]})]})}},{path:"/game",Component:function(){const e=i.useRef(null),t=P((e=>e.user.info)),[s,n]=i.useState("Preloader"),[r,a]=i.useState(0),o=`${B.TG_LINK}?startapp=${btoa(t.user_id)}SHAREGAME`,[c,l]=i.useState(!1),[d]=fs(),h=bs(),u=I(),m=N(),p=ks.getInstance();return i.useEffect((()=>{d.show(),d.on("click",(()=>{u(-1)}))}),[]),C.jsxs("div",{className:"game-wrapper",children:["Preloader"==s?C.jsx("div",{className:"loading",children:C.jsx("img",{src:"/assets/loading.gif"})}):null,"GameOver"==s?C.jsxs("div",{className:"game-over",children:[C.jsxs("div",{className:"game-over-top",children:[C.jsx("img",{src:"/assets/hooray-8Kybc2vw.gif",alt:"gif",className:"congrats-img"}),C.jsx("div",{className:"congrats",children:"Congrats!"}),C.jsx("div",{className:"congrats",children:"bountiful harvest"}),C.jsxs("div",{className:"score-wrapper",children:[C.jsx("span",{children:"+"}),C.jsxs("span",{children:[r," "]}),C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"tomato"})]})]}),C.jsxs("div",{className:"game-over-bot",children:[C.jsxs("div",{className:"game-over-btn",onClick:()=>{l(!0)},children:[C.jsx("img",{src:"/assets/kid-cYicWGds.webp",alt:"avatar",className:"avatar"}),C.jsxs("div",{className:"game-over-bot-middle",children:["Share Your Results +50",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"tomato",className:"tomato"})]}),C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3559",width:"26",height:"26",children:C.jsx("path",{d:"M384 768 640 512 384 256Z","p-id":"3560"})})]}),C.jsx("div",{className:"game-over-btn",style:{background:"#333"},onClick:()=>{var s,i,n;0!=t.ticket?null==(n=null==(i=null==(s=null==e?void 0:e.current)?void 0:s.game)?void 0:i.scene)||n.start("MainGame"):T.show({content:"0 Attempts Left",position:"top"})},children:C.jsxs("div",{className:"game-over-bot-middle",children:["Play (",t.ticket," Attempts Left)"]})})]})]}):null,C.jsx(As,{ref:e,currentActiveScene:async e=>{if(n(e.scene.key),"GameOver"==e.scene.key){p.emit("showCongrates",!0);const e=localStorage.getItem("currentScore")||0;a(e),(t={score:1*e},R({url:"/game/end",method:"POST",data:t})).then((e=>{0==e.code&&m(M(e.data))})).catch((e=>{console.error(e)}))}var t;if("MainGame"==e.scene.key){const e=await Os();0!=e.code?u(-1):m(M(e.data))}}}),C.jsx(Fe,{visible:c,onMaskClick:()=>{l(!1)},bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:C.jsxs("div",{className:"popup-result",children:[C.jsxs("div",{className:"popup-title",children:["Share Results",C.jsx("svg",{onClick:()=>l(!1),className:"close-svg",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5777",width:"16",height:"16",children:C.jsx("path",{d:"M597.795527 511.488347 813.564755 295.718095c23.833825-23.833825 23.833825-62.47489 0.001023-86.307691-23.832801-23.832801-62.47489-23.833825-86.307691 0L511.487835 425.180656 295.717583 209.410404c-23.833825-23.833825-62.475913-23.833825-86.307691 0-23.832801 23.832801-23.833825 62.47489 0 86.308715l215.769228 215.769228L209.410915 727.258599c-23.833825 23.833825-23.833825 62.47489 0 86.307691 23.832801 23.833825 62.473867 23.833825 86.307691 0l215.768205-215.768205 215.769228 215.769228c23.834848 23.833825 62.475913 23.832801 86.308715 0 23.833825-23.833825 23.833825-62.47489 0-86.307691L597.795527 511.488347z",fill:"#272636","p-id":"5778"})})]}),C.jsxs("div",{className:"popup-content",children:[C.jsx("div",{className:"popup-content-jb",children:"🏆"}),C.jsxs("div",{className:"score-wrapper",children:[C.jsx("span",{children:"+"}),C.jsxs("span",{children:[r," "]}),C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"tomato"})]}),C.jsxs("div",{children:["I scored ",r," points in Tomato Game!"]}),C.jsx("div",{children:"I dare you to challenge me!"}),C.jsx("div",{className:"popup-content-btn",onClick:()=>(()=>{const e=o,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),T.show({content:"copied",position:"top"})})(),children:"Copy link"}),C.jsx("div",{className:"popup-content-btn btn-send",onClick:()=>(()=>{const e=`I scored ${r} points in Tomato Game!\nI dare you to challenge me!\nFarm 🍅 $TOMATO with me and secure your token allocation through Tomarket.ai.\nUse my link to get 2,000 🍅 $TOMATO!`;h.shareURL(o,e)})(),children:"Send"})]})]})})]})}},{path:"/task",Component:function(){const[e,t]=i.useState([]),[s,n]=i.useState(!0),[r,a]=i.useState(!1),o=I();return i.useEffect((()=>{r&&setTimeout((()=>{a(!1)}),1e4)}),[r]),i.useEffect((()=>{n(!0),R({url:"/task/list",method:"GET"}).then((e=>{n(!1),t(e.data)}))}),[]),C.jsxs("div",{className:"task-page fadeIn",children:[C.jsxs("div",{className:"task-title",children:[C.jsx("img",{src:"/assets/task-logo.png",alt:"task",width:64}),C.jsx("div",{className:"task",children:"Tasks"}),C.jsx("div",{className:"desc",children:"Complete tasks to earn $TOMATO"})]}),C.jsxs("div",{className:"task-list",children:[s?[...Array(5)].map(((e,t)=>C.jsx(it,{className:"skeleton",animated:!0},t))):null,e.map(((s,i)=>C.jsxs("div",{className:"task-list-item",children:[C.jsxs("div",{className:"task-list-left",children:[C.jsx("img",{src:`/assets/${s.type}.png`,alt:s.type,className:"type-img"}),C.jsxs("div",{className:"middle",children:[C.jsx("div",{className:"middle-name",children:s.name}),C.jsxs("div",{className:"reward",children:[C.jsxs("span",{children:["+",s.score.toLocaleString()]})," ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"tomato",className:"unit-img"})," $TOMATO"]})]})]}),C.jsx("div",{className:"task-list-right",children:C.jsx(Ge,{className:`task-list-right-btn ${s.status}`,onClick:()=>(async(s,i)=>{if("Done"!=s.status){a(!0);const r=await(n=s,R({url:"/task/handle",method:"POST",data:n}));if(0==r.code){const s=JSON.parse(JSON.stringify(e));s[i].status=r.data.status,t(s)}else T.show({content:r.msg,position:"top"}),a(!1);null==s.status&&(s.type.includes("telegram")?bs().openLink(s.link):"twitter"==s.type?window.open(s.link):"wallet"==s.type&&o("/wallet"))}var n})(s,i),loading:r,children:s.status||"Start"})})]},i)))]})]})}},{path:"/frens",Component:function(){const e=P((e=>e.user.info)),t=I(),s=bs(),[n,r]=i.useState(!1),a=`${B.TG_LINK}?startapp=${btoa(e.user_id)}`,[o,c]=i.useState({}),[l,d]=i.useState(!0),[h,u]=i.useState(0);return i.useEffect((()=>{(async()=>{d(!0);const[e,t]=await Promise.all([L(),z()]);c(e.data),u(t.data.total),d(!1)})()}),[]),C.jsxs("div",{className:"frens-page fadeIn",children:[C.jsxs("div",{className:"frens-page-top",children:[C.jsxs("div",{className:"frens-title",children:[C.jsx("img",{src:"/assets/user-friends.png",alt:"friends"}),C.jsx("div",{className:"invite-earn",children:"Invite to Earn"}),C.jsx("div",{className:"frens-unit",children:"$TOMATO"})]}),h?C.jsxs("div",{className:"sub-container",onClick:()=>{t(`/frens-detail?total=${h}`)},children:[C.jsx("div",{className:"total",children:h}),C.jsx("div",{className:"frens",children:"Frens"}),C.jsx("div",{className:"view-frens",children:"View Frens Detail  >"})]}):null,C.jsxs("div",{className:"rules-container",children:[C.jsx("div",{className:"rules-title",children:"Referral Rules"}),C.jsxs("div",{className:"rules-content",children:[C.jsxs("div",{className:"rules-list",children:[C.jsx("div",{className:"rules-list-title",children:"Invite a Friends"}),C.jsxs("div",{className:"rules-desc",children:["You will both get ",null==o?void 0:o.invite_normalAccount_score," ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"unit"})," and ",null==o?void 0:o.invite_normalAccount_ticket," ",C.jsx("img",{src:"/assets/ticket-32x32.webp",alt:"unit"}),"."]})]}),C.jsxs("div",{className:"rules-list",children:[C.jsx("div",{className:"rules-list-title",children:"Invite a Friends with a Telegram Premium Account"}),C.jsxs("div",{className:"rules-desc",children:["You will both get ",null==o?void 0:o.invite_premiumAccount_score," ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"unit"})," and ",null==o?void 0:o.invite_premiumAccount_ticket," ",C.jsx("img",{src:"/assets/ticket-32x32.webp",alt:"unit"}),"."]})]}),C.jsxs("div",{className:"rules-list",children:[C.jsx("div",{className:"rules-list-title",children:"Additional Incentives"}),C.jsxs("div",{className:"rules-desc",children:["Get ",null==o?void 0:o.invite_friends_ratio,"% of Your Fren's  ",C.jsx("img",{src:"/assets/tomato-32x32.webp",alt:"unit"})," Yields in Rewards"]})]})]})]})]}),C.jsxs("div",{className:"page-bottom",children:[C.jsx(Ge,{color:"default",style:{fontWeight:"bold",flex:1,background:"#000",color:"#fff"},onClick:()=>{s.shareURL(a,"")},children:"👆🏻 Invite frens"}),C.jsx(Ge,{color:"default",className:"copy",onClick:()=>(()=>{const e=a,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),r(!0),setTimeout((()=>{r(!1)}),3e3)})(),children:n?C.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3786",width:"18",height:"18",children:C.jsx("path",{d:"M416.832 798.08C400.64 798.08 384.512 791.872 372.16 779.52L119.424 525.76C94.784 500.992 94.784 460.8 119.424 436.032 144.128 411.264 184.128 411.264 208.768 436.032L416.832 644.928 814.4 245.76C839.04 220.928 879.04 220.928 903.744 245.76 928.384 270.528 928.384 310.656 903.744 335.424L461.504 779.52C449.152 791.872 432.96 798.08 416.832 798.08Z",fill:"#272636","p-id":"3787"})}):C.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2452",width:"18",height:"18",children:[C.jsx("path",{d:"M878.272 981.312H375.36a104.64 104.64 0 0 1-104.64-104.64V375.36c0-57.792 46.848-104.64 104.64-104.64h502.912c57.792 0 104.64 46.848 104.64 104.64v502.912c-1.6 56.192-48.448 103.04-104.64 103.04z m-502.912-616.96a10.688 10.688 0 0 0-10.944 11.008v502.912c0 6.208 4.672 10.88 10.88 10.88h502.976c6.208 0 10.88-4.672 10.88-10.88V375.36a10.688 10.688 0 0 0-10.88-10.944H375.36z",fill:"#2c2c2c","p-id":"2453"}),C.jsx("path",{d:"M192.64 753.28h-45.312a104.64 104.64 0 0 1-104.64-104.64V147.328c0-57.792 46.848-104.64 104.64-104.64h502.912c57.792 0 104.64 46.848 104.64 104.64v49.92a46.016 46.016 0 0 1-46.848 46.912 46.08 46.08 0 0 1-46.848-46.848v-49.984a10.688 10.688 0 0 0-10.944-10.944H147.328a10.688 10.688 0 0 0-10.944 10.88v502.976c0 6.208 4.672 10.88 10.88 10.88h45.312a46.08 46.08 0 0 1 46.848 46.912c0 26.496-21.824 45.248-46.848 45.248z",fill:"#2c2c2c","p-id":"2454"})]})})]})]})}},{path:"/leaderboard",Component:function(){const e=P((e=>e.user.info)),[t,s]=i.useState("10.00M"),[n,r]=i.useState([]),[a,o]=i.useState(1),[c,l]=i.useState(1),[d,h]=i.useState(!0),u=N();return i.useEffect((()=>{U({}).then((e=>{0==e.code&&u(M(e.data.userInfo))}))}),[]),C.jsxs("div",{className:"LeaderBoard fadeIn",children:[C.jsx("div",{className:"title",children:"Telegram Wall of Fame"}),C.jsxs("div",{className:"myself",children:[C.jsxs("div",{className:"left",children:[C.jsx("div",{className:"icon",style:{background:xs(e.username)},children:e.username.slice(0,2)}),C.jsxs("div",{className:"name-score-warpper",children:[C.jsx("div",{className:"name",children:e.username}),C.jsxs("div",{className:"name-score",children:[e.score.toLocaleString()," TOMATO"]})]})]}),C.jsx("div",{className:"right",children:1==a?C.jsx("img",{src:"/assets/no1.png",alt:"no1"}):2==a?C.jsx("img",{src:"/assets/no2.png",alt:"no2"}):3==a?C.jsx("img",{src:"/assets/no3.png",alt:"no3"}):`#${a}`})]}),C.jsxs("div",{className:"holders",children:[C.jsxs("div",{className:"holder-title",children:[t," holders"]}),C.jsx(Qe,{children:n.map(((e,t)=>C.jsx(Qe.Item,{children:C.jsx(Ds,{...{...e,rank:t+1}})},t)))}),C.jsx(at,{loadMore:async function(){const e=await(async()=>{const e=await W({page:c});return s(ys(e.data.count)),l((e=>e+1)),o(e.data.rank),e.data.rows})();1==c?(e.length<20&&h(!1),r(e)):(r((t=>[...t,...e])),h(e.length>0))},hasMore:d})]})]})}},{path:"/wallet",Component:function(){const{connectWallet:e,isConnected:t}=F(),s=P((e=>e.user.info));return C.jsxs("div",{className:"wallet-page fadeIn",children:[C.jsx("img",{src:"/assets/wallet-logo.png",alt:"wallet"}),C.jsx("div",{className:"wallet-page-title",children:"The time has come."}),C.jsxs("div",{className:"connect-wrapper",children:[C.jsx("img",{src:"/assets/connection.png",alt:"wallet",width:24}),C.jsx("div",{className:"connect-desc",children:"Connect your PortKey Wallet"}),C.jsx("div",{className:"connect-intro",children:"The best Wallet to Explore TON Ecosystem"}),t?C.jsx("div",{className:"wallet-address",onClick:()=>function(e){const t=e,s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),T.show({content:"copied",position:"top"})}(s.wallet),children:js(s.wallet)}):C.jsx(Ge,{onClick:async()=>{try{await e()}catch(t){console.error(t.message)}},style:{marginTop:"1rem"},children:"connect"})]}),C.jsx("div",{className:"happing",children:"What's happening?"}),C.jsxs("div",{className:"activity",children:["Somethings ",C.jsx("span",{children:"HUGE"})," is coming in Oct."]}),C.jsxs("div",{className:"activity",children:["connecting PortKey Wallet is the ",C.jsx("span",{children:"first step"}),". Do not be late."]})]})}},{path:"/frens-detail",Component:function(){const e=I(),[t,s]=i.useState([]),[n,r]=i.useState(!0),[a,o]=i.useState(1),[c,l]=i.useState(0),d=V(),[h]=fs();return i.useEffect((()=>{h.show();const t=d.search;if(t){const e=t.replace("?total=","");l(e)}h.on("click",(()=>{e(-1)}))}),[]),C.jsxs("div",{className:"frens-detail-page",children:[C.jsxs("div",{className:"frens-title",children:[c," frens"]}),C.jsx(Qe,{children:t.map(((e,t)=>{return C.jsx(Qe.Item,{children:C.jsxs("div",{className:"frens-list",children:[C.jsxs("div",{className:"frens-detail-left",children:[C.jsx("div",{className:"icon",style:{background:xs(e.from_username)},children:e.from_username.slice(0,2)}),C.jsxs("div",{className:"frens-detail-name-container",children:[C.jsx("div",{className:"frens-detail-name",children:e.from_username}),C.jsx("div",{className:"frens-detail-time",children:H(e.createdAt).format("YYYY-MM-DD HH:mm")})]})]}),C.jsxs("div",{className:"frens-detail-right",children:[C.jsxs("div",{className:"score",children:["+",e.score.toLocaleString()]}),C.jsx("div",{className:"type",children:(s=e.type,"register"==s&&(s="Inviting"),"checkIn_parent"==s&&(s="Checking In"),"play_game_reward_parent"==s&&(s="Drop Game"),"harvest_farming"==s&&(s="Farming"),"share_playGame"==s&&(s="Share Game"),s)})]})]})},t);var s}))}),C.jsx(at,{loadMore:async function(){const e=await(async()=>{const e=await K({page:a});return o((e=>e+1)),e.data.rows})();1==a?(e.length<20&&r(!1),s(e)):(s((t=>[...t,...e])),r(e.length>0))},hasMore:n})]})}}];function Rs({visible:e,callBack:t}){const[s,n]=i.useState(e);return i.useEffect((()=>{n(e),e&&setTimeout((()=>{n(!1),t()}),2e3)}),[e]),C.jsx(C.Fragment,{children:s?C.jsx("div",{className:"penalty",children:C.jsx("img",{src:"/assets/dec-penalty-1-2TQXhsXO.gif",alt:"penalty"})}):null})}export{Rs as C,ks as E,fs as n,$s as r};
